<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>syncadelica</title>
    <meta name="description" content="visualized songs">
    <!-- Facebook Meta Tags -->
<meta property="og:url" content="https://syncadelica.vercel.app">
<meta property="og:type" content="website">
<meta property="og:title" content="synchadelica">
<meta property="og:description" content="visualized songs">
<meta property="og:image" content="https://opengraph.b-cdn.net/production/images/b35b02b8-34cf-4399-bf87-5c5cc8afe47e.png?token=r5PSkPRbwz-7mL3pHx18547gwxgPmC7ij71BfY_aqVs&height=630&width=1200&expires=33285723432">

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="syncadelica.vercel.app">
<meta property="twitter:url" content="https://syncadelica.vercel.app">
<meta name="twitter:title" content="synchadelica">
<meta name="twitter:description" content="visualized songs">
<meta name="twitter:image" content="https://opengraph.b-cdn.net/production/images/b35b02b8-34cf-4399-bf87-5c5cc8afe47e.png?token=r5PSkPRbwz-7mL3pHx18547gwxgPmC7ij71BfY_aqVs&height=630&width=1200&expires=33285723432">
    <link rel="stylesheet" href="style.css">
</head>
<body data-layout="text-center">

    <div id="splash-screen">
        <div class="splash-content">
                <img src="./syncadelica-logo.svg" alt="Syncadelica Logo" id="splash-logo">
            <div class="loader"></div>
        </div>
    </div>

    <div id="greeting-window" class="hidden">
        <div class="greeting-content">
            <h2>Welcome to Syncadelica!</h2>
            <p>This is an audio visualizer that syncs with lyrics.</p>
            <p>Upload your music and (optionally) an .lrc lyric file to get started. You can also drag and drop files onto the page.</p>
            
            <h3>Hotkeys:</h3>
            <ul>
                <li><kbd>O</kbd> - Open music file</li>
                <li><kbd>Space</kbd> - Play/Pause</li>
                <li><kbd>H</kbd> - Toggle UI visibility</li>
                <li><kbd>F</kbd> - Toggle Fullscreen</li>
                <li><kbd>←</kbd> / <kbd>→</kbd> - Adjust Volume</li>
                <li><kbd>↑</kbd> / <kbd>↓</kbd> - Navigate Lyrics (if available)</li>
            </ul>
            <h3>Credits:</h3>
            <div class="credits-section">
                <p class="author-credits">designed by:<a href="https://t.me/sarvarzied" target="_blank" rel="noopener noreferrer"> @sarvarzied</a></p>
                <h4 class="collapsible-trigger" aria-expanded="false" aria-controls="ack-content-greeting">Acknowledgements <span class="toggle-indicator">▼</span></h4>
                <div class="collapsible-target" id="ack-content-greeting">
                    <p>This application utilizes the following open-source libraries and browser technologies:</p>
                    <ul>
                        <li><strong>Three.js</strong> (<a href="https://threejs.org" target="_blank" rel="noopener noreferrer">threejs.org</a>) for rendering advanced 3D graphics and visualizations.</li>
                        <li><strong>jsmediatags</strong> (<a href="https://github.com/aadsm/jsmediatags" target="_blank" rel="noopener noreferrer">jsmediatags</a>) for parsing audio metadata.</li>
                        <li>The <strong>Web Audio API</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" target="_blank" rel="noopener noreferrer">Web Audio API</a>) for sophisticated audio processing and analysis.</li>
                    </ul>
                    <p>We extend our gratitude to the developers and communities behind these powerful tools for their contributions to the open-source ecosystem.</p>
                </div>
            </div>
            <h3>Changelogs:</h3>
            <div class="changelog-details-section">
                <h4 class="collapsible-trigger" aria-expanded="false" aria-controls="changelog-v0.1-greeting">Version 0.1 <span class="toggle-indicator">▼</span></h4>
                <div class="collapsible-target" id="changelog-v0.1-greeting">
                    <ul class="changelog-list">
                        <li>Initial release of Syncadelica.</li>
                        <li>Core audio visualization with shader effects.</li>
                        <li>Music and LRC file uploading (manual and drag & drop).</li>
                        <li>Lyrics synchronization, scrolling, and word-by-word animation.</li>
                        <li>Playback controls, UI customization (layout, album art).</li>
                    </ul>
                </div>
            </div>
            <div class="greeting-controls">
                <label class="dont-show-label">
                    <input type="checkbox" id="dont-show-greeting-again" class="visually-hidden">
                    <span class="custom-checkbox-text">Don't show this again</span>
                </label>
                <button id="got-it-button">Got it!</button>
            </div>
        </div>
    </div>

    <div id="hotkey-info-window" class="hidden">
        <div class="info-window-content">
            <h2>syncadelica alpha 0.1</h2>
            
            <h3>Hotkeys:</h3>
            <ul>
                <li><kbd>O</kbd> - Open music file</li>
                <li><kbd>Space</kbd> - Play/Pause</li>
                <li><kbd>H</kbd> - Toggle UI visibility</li>
                <li><kbd>F</kbd> - Toggle Fullscreen</li>
                <li><kbd>←</kbd> / <kbd>→</kbd> - Adjust Volume</li>
                <li><kbd>↑</kbd> / <kbd>↓</kbd> - Navigate Lyrics (if available)</li>
            </ul>

            <h3>Credits:</h3>
            <p class="author-credits">designed by:<a href="https://t.me/sarvarzied"> @sarvarzied</a></p>
            <div class="credits-section"> <!-- This div already exists, good -->
                <h4 class="collapsible-trigger" aria-expanded="false" aria-controls="ack-content-hotkey">Acknowledgements <span class="toggle-indicator">▼</span></h4>
                <div class="collapsible-target" id="ack-content-hotkey">
                    <p>This application utilizes the following open-source libraries and browser technologies:</p>
                    <ul>
                        <li><strong>Three.js</strong> (<a href="https://threejs.org" target="_blank" rel="noopener noreferrer">threejs.org</a>) for rendering advanced 3D graphics and visualizations.</li>
                        <li><strong>jsmediatags</strong> (<a href="https://github.com/aadsm/jsmediatags" target="_blank" rel="noopener noreferrer">jsmediatags</a>) for parsing audio metadata.</li>
                        <li>The <strong>Web Audio API</strong> (<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" target="_blank" rel="noopener noreferrer">Web Audio API</a>) for sophisticated audio processing and analysis.</li>
                    </ul>
                    <p>We extend our gratitude to the developers and communities behind these powerful tools for their contributions to the open-source ecosystem.</p>
                </div>
            </div>
            <h3>Changelogs:</h3>
            <div class="changelog-details-section">
                <h4 class="collapsible-trigger" aria-expanded="false" aria-controls="changelog-v0.1-hotkey">Version 0.1 <span class="toggle-indicator">▼</span></h4>
                <div class="collapsible-target" id="changelog-v0.1-hotkey">
                    <ul class="changelog-list">
                        <li>Initial release of Syncadelica.</li>
                        <li>Core audio visualization with shader effects.</li>
                        <li>Music and LRC file uploading (manual and drag & drop).</li>
                        <li>Lyrics synchronization, scrolling, and word-by-word animation.</li>
                        <li>Playback controls, UI customization (layout, album art).</li>
                    </ul>
                </div>
            </div>
            <div class="info-window-controls">
                <button id="close-hotkey-info-button">Close</button>
            </div>
        </div>
    </div>

    <div id="top-left-mobile-controls">
        <button class="icon-button" id="upload-music-button-top" title="Upload Music">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>
        </button>
        <button class="icon-button" id="upload-lrc-button-top" title="Upload Lyrics (.lrc)">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
        </button>
    </div>
    <div id="top-right-mobile-controls">
        <button class="icon-button" id="toggle-visuals-button-top" title="Visual Settings">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
        </button>
    </div>

    <img src="./syncadelica-logo.svg" alt="Syncadelica Logo" id="main-page-logo" draggable="false">

    <div id="visualizer-container"></div>

    <div id="main-content">
        <div id="lyrics-container">
            <div id="lyrics-list">
                <!-- This will be populated by JavaScript -->
            </div>
             <div id="lyrics-countdown"></div> <!-- Countdown display element -->
        </div>
        <div id="album-art-container"></div>
    </div>

    <div id="ui-container">
        <div id="visuals-panel" class="hidden">
            <div class="panel-section">
                <h3>Visuals</h3>
                <div class="control-grid">
                    <label for="reactivity-slider">Reactivity</label>
                    <input type="range" id="reactivity-slider" class="custom-slider" min="0" max="3" value="1.2" step="0.1">
                </div>
            </div>
            <div class="panel-section" id="display-panel-section">
                <h3>Display</h3>
                <div class="layout-controls">
                    <button class="icon-button" id="toggle-album-art-button" title="Toggle Album Art">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor">
                            <path d="M0 0h24v24H0V0z" fill="none"/>
                            <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="panel-section">
                <h3>Text Layout</h3>
                <div class="layout-controls">
                    <button class="icon-button layout-button" data-layout="text-left" title="Text Left"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 4h18v2H3V4zm0 7h12v2H3v-2zm0 7h18v2H3v-2z"/></svg></button>
                    <button class="icon-button layout-button active" data-layout="text-center" title="Text Center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 4h18v2H3V4zm3 7h12v2H6v-2zm-3 7h18v2H3v-2z"/></svg></button>
                    <button class="icon-button layout-button" data-layout="text-right" title="Text Right"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 4h18v2H3V4zm6 7h12v2H9v-2zm-6 7h18v2H3v-2z"/></svg></button>
                    <div class="layout-controls-divider"></div>
                    <button class="icon-button" id="toggle-word-animation-button" title="Toggle Word Animation">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                            <circle cx="6" cy="12" r="2"/>
                            <circle cx="10.5" cy="12" r="2"/>
                            <circle cx="15" cy="12" r="2" opacity="0.7"/>
                            <circle cx="19.5" cy="12" r="2" opacity="0.4"/>
                        </svg>
                    </button>
                    <button class="icon-button" id="toggle-lines-mode-button" title="Toggle Lines Display Mode">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 7h18" opacity="0.6"/>
                            <path d="M3 12h18" stroke-width="3"/>
                            <path d="M3 17h18" opacity="0.6"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="control-bar">
            <div class="bar-section" id="file-upload-section">
                <button class="icon-button" id="upload-music-button" title="Upload Music"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg></button>
                <button class="icon-button" id="upload-lrc-button" title="Upload Lyrics (.lrc)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></button>
                <input type="file" id="music-file" accept="audio/*" hidden>
                <input type="file" id="lrc-file" accept=".lrc" hidden>
            </div>
            <div class="bar-section" id="player-section">
                <audio id="audio"></audio>
                <div id="custom-player">
                    <div id="song-info">
                        <div id="player-album-art-container">
                            <img id="player-album-art" src="" alt="">
                        </div>
                        <div class="song-info-text">
                            <div id="song-title">No song loaded</div>
                            <div id="song-artist"></div>
                        </div>
                    </div>
                    <div class="playback-core">
                        <button id="play-pause-btn" class="player-button" title="Play/Pause">
                            <svg id="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg id="pause-icon" class="hidden" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <div class="progress-area">
                            <span id="current-time" class="time-display">0:00</span>
                            <div id="progress-bar">
                                <div id="progress-fill"></div>
                            </div>
                            <span id="total-duration" class="time-display">0:00</span>
                        </div>
                    </div>
                    <div id="volume-container">
                        <button id="volume-btn" class="player-button" title="Mute/Unmute">
                             <svg id="volume-icon" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                             <svg id="volume-mute-icon" class="hidden" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
                        </button>
                        <input type="range" id="volume-slider" class="custom-slider" min="0" max="1" step="0.01" value="1">
                    </div>
                </div>
            </div>
            <div class="bar-section" id="action-buttons-section">
                <button class="icon-button" id="toggle-visuals-button" title="Visual Settings">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </button>
                <button class="icon-button" id="hide-ui-button" title="Hide UI"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button>
            </div>
        </div>
    </div>
    <button id="show-ui-button" class="icon-button hidden" title="Show UI"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg></button>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>
    <script src="script.js"></script>
</body>
</html>