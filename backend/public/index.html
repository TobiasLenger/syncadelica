<!DOCTYPE html>
<html>
<head>
  <title>Music Search</title>
</head>
<body>
  <input id="query" placeholder="Search for music">
  <button onclick="search()">Search</button>
  <ul id="results"></ul>
  <audio id="player" controls style="width: 100%;"></audio>
  <script>
    async function search() {
      const q = document.getElementById('query').value;
      const res = await fetch(`/api/search?q=${encodeURIComponent(q)}`);
      const songs = await res.json();
      const ul = document.getElementById('results');
      ul.innerHTML = '';
      songs.forEach(song => {
        const li = document.createElement('li');
        li.textContent = `${song.artist} - ${song.title}`;
        li.onclick = async () => {
          document.getElementById('player').src = `/api/stream?page=${encodeURIComponent(song.page)}`;
          document.getElementById('player').play();
        };
        ul.appendChild(li);
      });
    }
  </script>
</body>
</html>